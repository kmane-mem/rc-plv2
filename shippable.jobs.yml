jobs:

#RELEASE

   - name: ar-release
     type: release
     steps:
       - IN: ar-version
         #versionName: testrelease
       - TASK: managed
         bump: rc
       #- IN: ar-tg3
     flags:
       - ar-release
     on_start:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_success:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_failure:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
      
#MANIFESTS
      
  - name: ar-manifest1
    type: manifest
    steps:
      - IN: ar-image1
       # versionNumber: 100
      - IN: ar-tg1
    on_start:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_success:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_failure:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
  
  - name: ar-ddcdeploy
    type: deploy
    steps:
      - IN: ar-manifest1
       # switch: off
      - IN: ar-params
      - IN: ar-dopts
      - IN: ar-replica2
        #versionNumber: 1000      
    on_start:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_success:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
       #- NOTIFY: allpl-irc
     on_failure:
       - NOTIFY: ar-email
       - NOTIFY: ar-slack
      
  - name: ar-inrunSh
    type: runSh
    steps:
      - IN: ar-samplescript
      # versionName: testsha
      - IN: allplar-image3invalidtag-tg2
      #- IN: test-time-1
      - TASK:
        - script: ls
        - script: ./IN/allpl-sample-script/gitRepo/echo.sh
      - OUT: ar-image3invalidtag
    on_start:
      - NOTIFY: allpl-slack
      - NOTIFY: allpl-email
    on_success:
      - NOTIFY: allpl-slack
      - NOTIFY: allpl-email
      - script: echo 'infra test'
      - script: echo 'newtesting success'
    on_failure:
      - script: echo 'testing1 failure'
      - script: echo 'failure runSh'
      - NOTIFY: allpl-slack
      - NOTIFY: allpl-email
      
